use Libraries.Game.Game
use Libraries.Game.Graphics.Drawable
/*
    This is a default class for creating a game in Quorum. Note that the Main 
    action begins by calling StartGame(), which loads a window a game can 
    be displayed in. The action CreateGame is where the game should load any 
    assets, like images to be displayed, frames of animation, or sounds to be
    played. 
*/
class Main is Game
    StateMachine mainGameMode
    StateStack mainStack
    MainMenuState mainMenu
    GameState game
    

    mainStack:beingPlayed = me
    //mainMenu:ED = mainGameMode:getStateMachine()
    //game:ED = mainGameMode:getStateMachine()
    mainMenu:Order = mainStack:GetStack()
    game:Order = mainStack:GetStack()
    mainMenu:main_beingPlayed = mainStack:getGame()
    game:game_beingPlayed = mainStack:getGame()
    
    action Main
        StartGame()
    end
    action CreateGame

        mainStack:Add("mainmenu", mainMenu)
        mainStack:Add("gamescreen", game)
        //output "State Machine has " + mainGameMode:getStateTable():GetSize() + "states"
        
        mainStack:Push("mainmenu")

    end

    /*
        The update action is called on every "frame" of animation in a game. This
        action should be used to do operations on items. So, for example, we 
        might use this action to change frames of animation, to rotate items, 
        or to make creatures jump.
    */
    action Update(number seconds)
        mainStack:Update(seconds)        
        mainStack:Render()
    end
end